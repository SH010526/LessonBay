<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LessonBay - 라이브</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />
  <link rel="preconnect" href="https://pqvdexhxytahljultmjd.supabase.co" />
  <link rel="dns-prefetch" href="https://pqvdexhxytahljultmjd.supabase.co" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
  <!-- LiveKit 웹 클라이언트 (vendor 복사본 사용) -->
  <script src="vendor/livekit-client.umd.js" defer></script>
  <script src="script.js" defer></script>
  <script src="pages/live_class.js" defer></script>
</head>
<body>
  <nav>
    <div class="container nav-inner">
      <a class="logo" href="index.html"><span class="logo-dot"></span>LessonBay</a>
      <div id="navLinks"></div>
      <div id="navRight"></div>
    </div>
  </nav>

  <section class="section">
    <div class="container" id="liveRoot">
      <div class="row" data-reveal>
        <div>
          <div class="h2" id="liveTitle">Live Room</div>
          <div class="muted" id="liveSub">-</div>
        </div>
        <a class="btn" id="sideSessionsLink" href="#">지난 수업 보기</a>
      </div>

      <div class="liveShell" data-reveal>
        <div class="panel">
          <div class="panelHead">
            <h3>라이브 영상 영역</h3>
            <div class="muted2" style="font-size:12px; font-weight:950;">라이브 준비</div>
          </div>
          <div class="panelBody">
            <div class="videoFrame" id="videoFrame">
              <video id="liveVideo" class="liveVideo" autoplay playsinline muted></video>
              <div class="videoOverlay" id="videoOverlay">카메라/마이크를 연결하면 라이브가 시작됩니다.</div>
            </div>
            <div style="display:flex; gap:6px; align-items:center; margin:8px 0 4px 0; flex-wrap:wrap;">
              <button class="btn" id="remoteViewGrid">그리드 뷰</button>
              <button class="btn" id="remoteViewSpeaker">스피커 뷰</button>
              <div class="muted" id="remotePinnedInfo" style="font-size:12px;"></div>
            </div>
            <div id="remoteVideos" class="remoteGrid"></div>
            <div class="remotePager">
              <button class="btn" id="remotePrev">이전</button>
              <span class="muted" id="remotePageInfo" style="margin:0 8px;">0/0</span>
              <button class="btn" id="remoteNext">다음</button>
            </div>

            <div class="controlsRow">
              <button class="btn primary" id="btnConnect">카메라/마이크 연결</button>
              <button class="btn" id="btnShare">화면 공유</button>
              <button class="btn" id="btnRecord">녹화 시작</button>
              <button class="btn" id="btnLeave">나가기</button>
              <button class="btn" id="btnQuality">고화질 유지</button>

              <div class="controlMini">
                <label>화면 비율</label>
                <select id="arSelect">
                  <option value="16/9" selected>16:9</option>
                  <option value="4/3">4:3</option>
                  <option value="1/1">1:1</option>
                  <option value="21/9">21:9</option>
                </select>
              </div>
            </div>

            <div class="muted" id="recordHint" style="margin-top:10px; font-size:13px;">
              녹화 종료 시, 지난 수업(다시보기)에 자동 등록됩니다.
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panelHead">
            <h3>실시간 채팅</h3>
            <div class="muted2" style="font-size:12px; font-weight:950;">online</div>
          </div>
          <div class="panelBody">
            <div class="chatLog" id="chatLog"></div>
            <div class="chatForm">
              <input id="chatInput" class="input" placeholder="메시지를 입력..." />
              <button id="chatSend" class="btn primary">전송</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="footer">© 2025 LessonBay. All rights reserved.</div>
</body>
</html>
